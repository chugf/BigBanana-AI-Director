services:
  web:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: bigbanana-web
    ports:
      - "80:80"
    depends_on:
      - media-proxy
    restart: unless-stopped

  media-proxy:
    build:
      context: .
      dockerfile: Dockerfile.media-proxy
    container_name: bigbanana-media-proxy
    environment:
      MEDIA_PROXY_PORT: "8787"
      MEDIA_PROXY_ALLOWED_HOSTS: "volces.com"
      MEDIA_PROXY_ALLOWED_PROTOCOLS: "https"
      MEDIA_PROXY_TIMEOUT_MS: "120000"
      MEDIA_PROXY_MAX_URL_LENGTH: "4096"
      MEDIA_PROXY_CORS_ORIGIN: "*"
    expose:
      - "8787"
    restart: unless-stopped

