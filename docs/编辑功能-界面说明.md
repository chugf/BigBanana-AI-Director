# 编辑功能界面说明

本文档详细说明编辑功能的界面元素和交互方式。

---

## 1. 角色编辑界面

### 位置
**剧本清单页面** → **左侧边栏** → **演员表**

### 界面元素

#### 默认状态（未编辑）
```
┌─────────────────────────────────────┐
│ 👥 演员表                            │
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │ Alex                    Male   ✏│ │ ← 鼠标悬停显示编辑图标
│ │ A young person in casual...     │ │
│ └─────────────────────────────────┘ │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ Sarah                  Female   │ │
│ │ A professional woman...         │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

#### 编辑状态
```
┌─────────────────────────────────────┐
│ 👥 演员表                            │
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │ Alex                    Male    │ │
│ │ ┌─────────────────────────────┐ │ │
│ │ │ A 25-year-old Asian male   │ │ │ ← 多行文本框
│ │ │ with short black hair,     │ │ │
│ │ │ wearing a futuristic...    │ │ │
│ │ └─────────────────────────────┘ │ │
│ │ [✓ 保存] [✗ 取消]              │ │ ← 操作按钮
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

### 交互流程
1. **鼠标悬停** → 卡片背景变深，显示编辑图标
2. **点击编辑图标** → 展开文本框，显示当前内容
3. **修改内容** → 实时输入，无字数限制
4. **点击保存** → 更新数据，退出编辑模式
5. **点击取消** → 恢复原始内容，退出编辑模式

---

## 2. 分镜编辑界面（桌面端）

### 位置
**剧本清单页面** → **分镜列表** → **右侧提示词栏**

### 界面元素

#### 默认状态（未编辑）
```
┌──────────────────────────────────────────────────────────────┐
│ SHOT 003                                                      │
├──────────────────────────────────────────────────────────────┤
│ MED │ Alex walking into spaceship    │ 📷 画面提示词      ✏ │
│ DOLLY│                                │ Medium shot of...   │
│      │ "Welcome aboard."              │ interior scene,     │
│      │                                │ futuristic...       │
│      │ [Alex]                         │                     │
└──────────────────────────────────────────────────────────────┘
```

#### 编辑状态
```
┌──────────────────────────────────────────────────────────────┐
│ SHOT 003                                                      │
├──────────────────────────────────────────────────────────────┤
│ MED │ Alex walking into spaceship    │ 📷 画面提示词        │
│ DOLLY│                                │ ┌─────────────────┐ │
│      │ "Welcome aboard."              │ │ Medium shot of │ │
│      │                                │ │ Alex walking   │ │
│      │ [Alex]                         │ │ confidently... │ │
│      │                                │ │ holographic... │ │
│      │                                │ │ blue ambient...│ │
│      │                                │ └─────────────────┘ │
│      │                                │ [✓ 保存] [✗ 取消]  │
└──────────────────────────────────────────────────────────────┘
```

---

## 3. 分镜编辑界面（移动端）

### 位置
**剧本清单页面** → **分镜列表** → **分镜详情下方**

### 界面元素

#### 默认状态
```
┌────────────────────────────────────┐
│ SHOT 003                           │
├────────────────────────────────────┤
│ MED                                │
│ DOLLY                              │
│                                    │
│ Alex walking into spaceship        │
│ "Welcome aboard."                  │
│ [Alex]                             │
│                                    │
│ ─────────────────────────────────  │
│ 📷 画面提示词                  ✏  │
│ Medium shot of Alex walking...     │
└────────────────────────────────────┘
```

#### 编辑状态
```
┌────────────────────────────────────┐
│ SHOT 003                           │
├────────────────────────────────────┤
│ MED                                │
│ DOLLY                              │
│                                    │
│ Alex walking into spaceship        │
│ "Welcome aboard."                  │
│ [Alex]                             │
│                                    │
│ ─────────────────────────────────  │
│ 📷 画面提示词                      │
│ ┌────────────────────────────────┐ │
│ │ Medium shot of Alex walking   │ │
│ │ confidently into the spaceship│ │
│ │ command center. Futuristic... │ │
│ └────────────────────────────────┘ │
│ [✓ 保存] [✗ 取消]                 │
└────────────────────────────────────┘
```

---

## 4. 按钮和图标说明

### 图标
- **✏️ (Edit2)** - 编辑按钮，点击进入编辑模式
- **✓ (Check)** - 保存按钮，确认修改
- **✗ (X)** - 取消按钮，放弃修改

### 按钮样式

#### 编辑按钮
- **默认**：不可见（opacity: 0）
- **悬停**：可见（opacity: 100），灰色背景
- **点击**：进入编辑模式

#### 保存按钮
- **颜色**：白色背景，黑色文字
- **悬停**：浅灰色背景
- **效果**：保存数据，退出编辑模式

#### 取消按钮
- **颜色**：深灰色背景，灰色文字
- **悬停**：稍浅的灰色背景
- **效果**：恢复原始内容，退出编辑模式

---

## 5. 响应式断点

### 桌面端（≥1280px）
- 左侧边栏：固定宽度 288px
- 分镜列表：自适应宽度
- 提示词栏：固定宽度 256px，显示在右侧

### 平板端（768px - 1279px）
- 左侧边栏：可能隐藏或折叠
- 分镜列表：全宽
- 提示词栏：隐藏，改为显示在分镜详情下方

### 移动端（<768px）
- 左侧边栏：折叠或抽屉式
- 分镜列表：全宽，垂直滚动
- 提示词栏：显示在分镜详情下方

---

## 6. 颜色和样式

### 主题色
- **背景**：`#050505` (深黑)
- **卡片背景**：`#0A0A0A` (浅黑)
- **边框**：`#27272A` (zinc-800)
- **文字**：`#D4D4D8` (zinc-300)
- **高亮**：`#FFFFFF` (白色)

### 编辑模式
- **文本框背景**：`#141414`
- **文本框边框**：`#3F3F46` (zinc-700)
- **焦点边框**：`#71717A` (zinc-500)
- **文字颜色**：`#D4D4D8` (zinc-300)

### 按钮
- **保存按钮**：白色背景 + 黑色文字
- **取消按钮**：`#27272A` 背景 + `#A1A1AA` 文字

---

## 7. 动画和过渡

### 悬停效果
- **卡片**：`transition-colors` (200ms)
- **编辑图标**：`opacity` 过渡 (200ms)
- **按钮**：`background-color` 过渡 (150ms)

### 展开/收起
- **编辑区域**：高度自适应，无动画（即时展开）
- **文本框**：无过渡动画

---

## 8. 可访问性

### 键盘支持
- **Tab** - 在可编辑元素间切换
- **Enter** - 保存修改（在文本框内需 Ctrl+Enter）
- **Escape** - 取消编辑

### 屏幕阅读器
- 编辑按钮：`title="编辑角色描述"` / `title="编辑提示词"`
- 保存按钮：包含图标和文字，易于识别
- 取消按钮：包含图标和文字，易于识别

### 对比度
- 所有文字与背景对比度 ≥ 4.5:1（WCAG AA标准）
- 按钮在悬停状态下对比度增强

---

## 9. 错误处理

### 空内容
- 允许保存空内容（清除提示词）
- 不显示错误提示

### 超长内容
- 文本框自动滚动
- 无字数限制
- 建议保持在 500 字符以内（性能考虑）

### 网络错误
- 编辑功能为本地操作，不涉及网络请求
- 数据保存到 localStorage，无网络依赖

---

## 10. 性能优化

### 渲染优化
- 只有当前编辑的项目会重新渲染
- 其他项目保持不变，避免不必要的重绘

### 内存管理
- 编辑状态仅保存当前编辑项
- 取消编辑时立即清理状态

### 存储优化
- 每次保存立即写入 localStorage
- 无需等待批量保存或手动保存

---

## 总结

编辑功能的界面设计遵循以下原则：
1. **直观性**：悬停显示编辑按钮，清晰的保存/取消操作
2. **一致性**：角色和分镜编辑采用相同的交互模式
3. **响应式**：适配桌面端和移动端
4. **高效性**：实时保存，无需额外操作
5. **可访问性**：支持键盘操作和屏幕阅读器

这些设计确保用户能够快速、准确地修改AI生成的内容，提升整体创作体验。

